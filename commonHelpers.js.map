{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["\nimport axios from 'axios';\n\nconst KEY = `42787384-4c627c93f7dff570902230658`;\nconst BASE_URI = `https://pixabay.com/api/`;\n\n\nexport async function getImages(QUERY, page = 1) {\n  try {\n      const response = await axios.get(`${BASE_URI}?key=${KEY}&q=${QUERY}&image_type=photo&per_page=15&page=${page}`);\n      return response.data;\n  } catch (error) {\n      console.error('Error fetching data:', error);\n      throw error;\n  }\n}\n","export function createGallery(arr) {\n    return arr.hits\n      .map(({largeImageURL, webformatURL, tags, likes, views, comments, downloads}) => \n        `<li class=\"gallery-item\">\n        <a class=\"gallery-link\" href=\"${largeImageURL}\">\n            <img \n            src=\"${webformatURL}\" \n            alt=\"${tags}\" \n            width=\"360\" height=\"260\"/>\n        </a>\n        <div>\n            <p>\n                <span>Likes: <span>${likes}</span>\n                </span>    \n            </p>\n            <p>\n                <span>Views: <span>${views}</span>\n                </span>    \n            </p>\n            <p>\n                <span>Comments: <span>${comments}</span>\n                </span>    \n            </p>\n            <p>\n                <span>Downloads: <span>${downloads}</span>\n                </span>    \n            </p>\n        </div>\n    </li>`\n      )\n      .join('');\n  }","import SimpleLightbox from 'simplelightbox';\nimport iziToast from 'izitoast';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport { getImages } from './js/pixabay-api.js';\nimport { createGallery } from './js/render-functions.js';\n\nconst cardPlace = document.querySelector('.card-place');\nconst form = document.querySelector('.form');\nconst input = form.querySelector('.input');\nconst loadButton = document.querySelector('.load-btn');\nconst loader = document.querySelector('.loader-div');\nloader.style.display = 'none';\n\nlet lastSerch;\nloadButton.style.display = 'none';\n// let limit = 15;\nlet page = 1;\nlet totalImg;\nlet totalPages;\n\nform.addEventListener('submit', submitFormFct);\nloadButton.addEventListener('click', loadBtnFct);\n\nasync function submitFormFct(event) {\n  event.preventDefault();\n  loader.style.display = 'flex';\n  page = 1;\n  cardPlace.innerHTML = '';\n  const QUERY = input.value.trim().toLowerCase().replace(/ /g, '+');\n  lastSerch = QUERY;\n\n  // console.log(getImages(QUERY));\n\n  getImages(QUERY)\n    .then(arr => {\n      totalImg = arr.totalHits;\n      totalPages = Math.ceil(totalImg / 15);\n      // console.log(totalImg);\n      // console.log(totalPages);\n\n      if (totalImg === 0) {\n        iziToast.error({\n          message:\n            'Sorry, there are no images matching your search query. Please try again!',\n        });\n        document.querySelector('.load-btn').style.display = 'none';\n        loader.style.display = 'none';\n      } else if (totalImg <= 15) {\n        cardPlace.innerHTML = createGallery(arr);\n        lightbox.refresh();\n        form.reset();\n        document.querySelector('.load-btn').style.display = 'none';\n      } else {\n        cardPlace.innerHTML = createGallery(arr);\n        lightbox.refresh();\n        form.reset();\n        document.querySelector('.load-btn').style.display = 'block';\n      }\n      loader.style.display = 'none';\n    })\n    .catch(error => {\n      iziToast.error({\n        message: `${error}`,\n      });\n    });\n}\n\nasync function loadBtnFct(event) {\n  event.preventDefault();\n  loader.style.display = 'flex';\n  page++;\n\n  if (page >= totalPages) {\n    iziToast.show({\n      message: \"We're sorry, but you've reached the end of search results.\",\n    });\n    document.querySelector('.load-btn').style.display = 'none';\n    loader.style.display = 'none';\n  }\n  try {\n    const response = await getImages(lastSerch, page);\n    const galleryMarkup = createGallery(response);\n    cardPlace.insertAdjacentHTML('beforeend', galleryMarkup);\n    lightbox.refresh();\n    smoothScrollBy(\n      cardPlace.firstElementChild.getBoundingClientRect().height * 2);\n    loader.style.display = 'none';\n  } catch (error) {\n    iziToast.error({\n      message: `${error}`,\n    });\n  }\n}\n\nconst lightbox = new SimpleLightbox('.gallery-link', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\nfunction smoothScrollBy(distance) {\n  window.scrollBy({\n    top: distance,\n    behavior: 'smooth',\n  });\n}\n\n\n// в коді нижче колекція складається тільки з 15 позицій, якщо менше, то вона не працює, (просто мені здалось, що це така умова була)\n\n// async function submitFormFct(event) {\n//   event.preventDefault();\n//   loader.style.display = 'flex';\n//   page = 1;\n//   cardPlace.innerHTML = '';\n//   const QUERY = input.value.trim().toLowerCase().replace(/ /g, '+');\n//   lastSerch = QUERY;\n\n//   console.log(getImages(QUERY));\n\n//   getImages(QUERY)\n//     .then(arr => {\n//       totalImg = arr.totalHits;\n//       totalPages = Math.floor(totalImg / 15);\n//       console.log(totalImg);\n//       console.log(totalPages);\n\n//       if (totalImg < 15) {\n//         iziToast.error({\n//           message:\n//             'Sorry, there are no images matching your search query. Please try again!',\n//         });\n//         document.querySelector('.load-btn').style.display = 'none';\n//         loader.style.display = 'none';\n//       } else if (totalImg >= 15 && totalImg < 30) {\n//         cardPlace.innerHTML = createGallery(arr);\n//         lightbox.refresh();\n//         form.reset();\n//         document.querySelector('.load-btn').style.display = 'none';\n//       } else {\n//         cardPlace.innerHTML = createGallery(arr);\n//         lightbox.refresh();\n//         form.reset();\n//         document.querySelector('.load-btn').style.display = 'block';\n//       }\n//       loader.style.display = 'none';\n//     })\n//     .catch(error => {\n//       iziToast.error({\n//         message: `${error}`,\n//       });\n//     });\n// }"],"names":["KEY","BASE_URI","getImages","QUERY","page","axios","error","createGallery","arr","largeImageURL","webformatURL","tags","likes","views","comments","downloads","cardPlace","form","input","loadButton","loader","lastSerch","totalImg","totalPages","submitFormFct","loadBtnFct","event","iziToast","lightbox","response","galleryMarkup","smoothScrollBy","SimpleLightbox","distance"],"mappings":"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"}