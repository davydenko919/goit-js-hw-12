{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import iziToast from 'izitoast';\nimport axios from 'axios';\n\nconst KEY = `42787384-4c627c93f7dff570902230658`;\nconst BASE_URI = `https://pixabay.com/api/`;\n\n\nexport async function getImages(QUERY, page) {\n  const LINK = `${BASE_URI}?key=${KEY}&q=${QUERY}&image_type=photo&per_page=15&page=${page}`;\n  console.log(LINK)\n  try {\n    const response = await axios.get(LINK);\n\n    if (response.data.hits.length === 0) {\n      if (page === 1) {\n        iziToast.error({\n          message:\n            'Sorry, there are no images matching your search query. Please try again!',\n        });\n      } else {\n        iziToast.show({\n          message: 'We\\'re sorry, but you\\'ve reached the end of search results.',\n      });\n      // document.querySelector('.load-btn').style.display = 'none'; \n      }\n     \n      document.querySelector('.load-btn').style.display = 'none';\n      return [];\n    }\n    return response.data;\n  } catch (error) {\n    console.error(`Error: ${error}`);\n  }\n}\n","export function createGallery(arr) {\n    return arr.hits\n      .map(({largeImageURL, webformatURL, tags, likes, views, comments, downloads}) => \n        `<li class=\"gallery-item\">\n        <a class=\"gallery-link\" href=\"${largeImageURL}\">\n            <img \n            src=\"${webformatURL}\" \n            alt=\"${tags}\" \n            width=\"360\" height=\"260\"/>\n        </a>\n        <div>\n            <p>\n                <span>Likes: <span>${likes}</span>\n                </span>    \n            </p>\n            <p>\n                <span>Views: <span>${views}</span>\n                </span>    \n            </p>\n            <p>\n                <span>Comments: <span>${comments}</span>\n                </span>    \n            </p>\n            <p>\n                <span>Downloads: <span>${downloads}</span>\n                </span>    \n            </p>\n        </div>\n    </li>`\n      )\n      .join('');\n  }","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport {getImages} from \"./js/pixabay-api.js\"\nimport {createGallery} from \"./js/render-functions.js\"\n\nconst cardPlace = document.querySelector('.card-place');\nconst form = document.querySelector('.form');\nconst input = form.querySelector('.input');\nconst loadButton = document.querySelector('.load-btn');\nconst loader = document.querySelector('.loader-div');\nloader.style.display = 'none';\n\nlet lastSerch;\nloadButton.style.display = 'none';\nlet limit = 15;\nconst totalHits = Math.ceil(100 / limit);\n\n\nform.addEventListener('submit', (event) => {\n    event.preventDefault();\n    page = 1;\n    cardPlace.innerHTML = '';\n    const QUERY = input.value.trim().toLowerCase().replace(/ /g, \"+\");\n    lastSerch = QUERY;\n    loadButton.style.display = 'block';\n    // console.log(getImages(QUERY));\n    // console.log(createGallery(getImages(QUERY)));\n    \n    getImages(QUERY, page)\n    .then(arr => {\n        cardPlace.innerHTML = createGallery(arr);\n        lightbox.refresh();\n        form.reset();\n      })\n      .catch(error => {\n        console.error('Error:', error);\n      });\n});\n\nconst lightbox = new SimpleLightbox('.gallery-link', {\n    captionsData: 'alt',\n    captionDelay: 250,\n});\n\n\n\nlet page = 1;\n\nloadButton.addEventListener('click', async () => {\n  page++; \n  if (page > totalHits) {\n      loadButton.style.display = 'none'; \n      iziToast.show({\n          message: 'We\\'re sorry, but you\\'ve reached the end of search results.',\n      });\n      return;\n  }\n  try {\n      const response = await getImages(lastSerch, page);\n\n      if (response.hits.length > 0) {\n          const galleryMarkup = createGallery(response);\n          cardPlace.insertAdjacentHTML('beforeend', galleryMarkup);\n          lightbox.refresh(); \n          smoothScrollBy(cardPlace.firstElementChild.getBoundingClientRect().height * 2);\n      } else {\n          iziToast.show({\n              message: 'We\\'re sorry, but you\\'ve reached the end of search results.',\n          });\n          document.querySelector('.load-btn').style.display = 'none'; \n      }\n  } catch (error) {\n      console.error('Error:', error);\n  }\n});\n\nfunction smoothScrollBy(distance) {\n  window.scrollBy({\n      top: distance,\n      behavior: 'smooth'\n  });\n}"],"names":["KEY","BASE_URI","getImages","QUERY","page","LINK","response","axios","iziToast","error","createGallery","arr","largeImageURL","webformatURL","tags","likes","views","comments","downloads","cardPlace","form","input","loadButton","loader","lastSerch","limit","totalHits","event","lightbox","SimpleLightbox","galleryMarkup","smoothScrollBy","distance"],"mappings":"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"}